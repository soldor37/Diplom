(function(t){function e(e){for(var o,r,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,s=1;s<a.length;s++){var c=a[s];0!==n[c]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},n={app:0},i=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("45fc"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[t.isLoggedIn?a("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{attrs:{link:""}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-chart-bar")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[a("router-link",{attrs:{to:"/",tag:"nav"}},[t._v("Comparisone")])],1)],1)],1),1==t.is_admin?a("v-list-item",{attrs:{link:""}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-database-edit")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[a("router-link",{attrs:{to:"/AdminPanel",tag:"nav"}},[t._v("Database")])],1)],1)],1):t._e()],1)],1):t._e(),a("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("v-toolbar-title",[t._v("Application")]),a("v-spacer"),t.isLoggedIn?t._e():a("v-btn",{staticClass:"ma-2",attrs:{color:"primary",to:"/login"}},[t._v(" Login "),a("v-icon",[t._v("mdi-login-variant")])],1),t.isLoggedIn?a("v-btn",{staticClass:"ma-2",attrs:{color:"primary"},on:{click:t.logout}},[t._v(" Logout "),a("v-icon",[t._v("mdi-logout")])],1):t._e()],1),a("v-content",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"text-center"},[a("router-view")],1)],1)],1)],1),a("v-footer",{attrs:{color:"indigo",app:""}},[a("span",{staticClass:"white--text"},[t._v("© 2020")])])],1)},i=[],r=(a("d3b7"),{data:function(){return{drawer:null,is_admin:null}},computed:{isLoggedIn:function(){return this.isAdmin(),this.$store.getters.isLoggedIn}},methods:{isAdmin:function(){this.is_admin=localStorage.is_admin},logout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push("/login")}))}},created:function(){this.$http.interceptors.response.use(void 0,(function(t){return new Promise((function(){throw 401===t.status&&t.config&&!t.config.__isRetryRequest&&this.$store.dispatch("logout"),t}))}))}}),s=r,c=a("2877"),l=Object(c["a"])(s,n,i,!1,null,null,null),u=l.exports,d=(a("f9e3"),a("2dd8"),a("5f5b")),p=a("b1e0"),f=a("8c4f"),m=a("1321"),v=a.n(m),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.packages,"sort-by":"ID"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Packages")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("New item")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Package name"},model:{value:t.editedItem.pack_name,callback:function(e){t.$set(t.editedItem,"pack_name",e)},expression:"editedItem.pack_name"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.save(t.onInsert,t.onEdit)}}},[t._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{big:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil-outline ")]),a("v-icon",{attrs:{big:""},on:{click:function(e){return t.deleteItem(o,t.onDelete)}}},[t._v(" mdi-delete-circle-outline ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.getPackages}},[t._v("Reset")])]},proxy:!0}])})],1)},g=[],b=(a("c975"),a("a434"),a("bc3a")),k=a.n(b),_={name:"adminpanel",data:function(){return{dialog:!1,headers:[{text:"Package name",align:"left",sortable:!1,value:"pack_name"},{text:"ID",value:"idpack"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{pack_name:"",idpack:""},defaultItem:{pack_name:""},packages:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.getPackages()},methods:{editItem:function(t){this.editedIndex=this.packages.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t,e){var a=this.packages.indexOf(t);confirm("Are you sure you want to delete this item?")&&this.packages.splice(a,1),e(t)},close:function(){var t=this;this.dialog=!1,setTimeout((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}),300)},save:function(t,e){this.editedIndex>-1?(Object.assign(this.packages[this.editedIndex],this.editedItem),e(this.editedItem)):(this.packages.push(this.editedItem),t(this.editedItem)),this.close()},onInsert:function(t){var e=this,a=window.location.hostname;k.a.post("http://".concat(a,":3000/posts/insert"),t).then((function(t){e.getPackages(),console.log(t)})).catch((function(t){alert(t+"\n Failed to POST on server"),console.log("-----error-------"),console.log(t)}))},onEdit:function(t){var e=this,a=window.location.hostname;k.a.post("http://".concat(a,":3000/posts/edit"),t).then((function(t){e.getPackages(),console.log(t)})).catch((function(t){alert(t+"\n Failed to POST on server"),console.log("-----error-------"),console.log(t)}))},onDelete:function(t){var e=window.location.hostname;k.a.post("http://".concat(e,":3000/posts/delete"),t).then((function(t){console.log(t)})).catch((function(t){alert(t+"\n Failed to POST on server"),console.log("-----error-------"),console.log(t)}))},getPackages:function(){var t=this,e=window.location.hostname;k.a.get("http://".concat(e,":3000/posts")).then((function(e){console.log(e),t.packages=e.data})).catch((function(t){alert(t+"\n Failed connect to DB"),console.log("-----error-------"),console.log(t)}))}}},w=_,x=(a("6644"),Object(c["a"])(w,h,g,!1,null,null,null)),y=x.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"comparisone"}},[a("router-view"),a("b-container",{staticClass:"mt-2"},[a("b-row",[a("b-col",{attrs:{cols:"4"}},[a("b-form-select",{staticClass:"mb-2",attrs:{options:t.packages,"value-field":"idpack","text-field":"pack_name"},model:{value:t.selectedPack1,callback:function(e){t.selectedPack1=e},expression:"selectedPack1"}}),a("b-form-select",{staticClass:"mb-2",attrs:{options:t.packages,"value-field":"idpack","text-field":"pack_name"},model:{value:t.selectedPack2,callback:function(e){t.selectedPack2=e},expression:"selectedPack2"}}),a("b-button",{attrs:{size:"lg",variant:"outline-dark"},on:{click:function(e){return t.calc()}}},[t._v("Calculate")])],1),a("b-col",{attrs:{cols:"8"}},[a("apexchart",{attrs:{type:"bar",options:t.chart1.chartOptions,series:t.chart1.series}})],1)],1)],1)],1)},P=[],S=(a("a9e3"),a("b680"),{name:"comparisone",data:function(){return{selectedPack1:1,selectedPack2:2,chart1:{series:[],chartOptions:{chart:{type:"bar",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!1,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},legend:{show:!0,formatter:function(t){return t},fontSize:"16px"},plotOptions:{bar:{dataLabels:{position:"center"},horizontal:!1,columnWidth:"95%"}},dataLabels:{enabled:!0,dropShadow:{enabled:!0,left:2,top:2,opacity:.5},style:{fontSize:"18px"}},stroke:{show:!0,width:4,colors:["transparent"]},xaxis:{categories:["air, m^2","water, l","energy, MJ","oil consumption, l"]},yaxis:{title:{text:"Relative values of environmental characteristics",style:{fontSize:"15px"}}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return Number(t).toFixed(2)}}}}},packages:[]}},created:function(){this.getPackages()},methods:{getPackages:function(){var t=this,e=window.location.hostname;k.a.get("http://".concat(e,":3000/posts")).then((function(e){console.log(e),t.packages=e.data})).catch((function(t){alert(t+"\n Ошибка подключения к базе данных"),console.log("-----error-------"),console.log(t)}))},calc:function(){var t=this,e=window.location.hostname,a=[t.selectedPack1,t.selectedPack2];console.log(a),k.a.post("http://".concat(e,":3000/posts/calc"),{params:{ID:a}}).then((function(e){t.chart1.series=e.data})).catch((function(t){console.log("-----error-------"),console.log(t)}))}}}),O=S,C=Object(c["a"])(O,I,P,!1,null,null,null),j=C.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Authorization")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Login",name:"login",type:"text"},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.submit}},[t._v("Login")])],1)],1)],1)],1)},$=[],L={data:function(){return{login:"",password:""}},methods:{submit:function(){var t=this,e=this.login,a=this.password;this.$store.dispatch("login",{login:e,password:a}).then((function(){return t.$router.push("/")})).catch((function(t){return console.log(t)}))}}},z=L,T=Object(c["a"])(z,A,$,!1,null,null,null),E=T.exports,q=a("2f62");o["default"].use(q["a"]);var D=new q["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",user:{}},mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e,a){t.status="success",t.token=e,t.user=a},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token=""}},actions:{login:function(t,e){var a=t.commit;return new Promise((function(t,o){a("auth_request"),k.a.post("http://localhost:3000/posts/login",e).then((function(e){var o=e.data.token,n=e.data.user;localStorage.setItem("token",o),localStorage.setItem("is_admin",JSON.stringify(e.data.user.is_admin)),k.a.defaults.headers.common["Authorization"]=o,a("auth_success",o,n),t(e)})).catch((function(t){a("auth_error"),localStorage.removeItem("token"),o(t)}))}))},register:function(t,e){var a=t.commit;return new Promise((function(t,o){a("auth_request"),k()({url:"http://localhost:3000/register",data:e,method:"POST"}).then((function(e){var o=e.data.token,n=e.data.user;localStorage.setItem("token",o),k.a.defaults.headers.common["Authorization"]=o,a("auth_success",o,n),t(e)})).catch((function(t){a("auth_error",t),localStorage.removeItem("token"),o(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t){e("logout"),localStorage.removeItem("token"),delete k.a.defaults.headers.common["Authorization"],t()}))}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}}}),F=a("ce5b"),J=a.n(F);a("bf40"),a("5363");o["default"].use(J.a);var M={},N=new J.a(M);o["default"].use(d["a"]),o["default"].use(p["a"]),o["default"].use(f["a"]),o["default"].component("apexchart",v.a),o["default"].prototype.$http=k.a;var R=localStorage.getItem("token");R&&(o["default"].prototype.$http.defaults.headers.common["Authorization"]=R);var B=[{path:"/AdminPanel",component:y,name:"adminpanel",meta:{requiresAuth:!0,is_admin:!0}},{path:"/",component:j,name:"comparisone",meta:{requiresAuth:!0}},{path:"/login",component:E},{path:"*",redirect:"/"}],G=new f["a"]({routes:B,mode:"history"});G.beforeEach((function(t,e,a){var o=JSON.parse(localStorage.getItem("is_admin"));if(t.matched.some((function(t){return t.meta.is_admin})))1==o?a():alert("access denied");else if(t.matched.some((function(t){return t.meta.requiresAuth}))){if(D.getters.isLoggedIn)return void a();a("/login")}else a()})),new o["default"]({vuetify:N,router:G,store:D,render:function(t){return t(u)}}).$mount("#app")},6644:function(t,e,a){"use strict";var o=a("a453"),n=a.n(o);n.a},a453:function(t,e,a){}});
//# sourceMappingURL=app.b2611e01.js.map